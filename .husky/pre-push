#!/usr/bin/env sh

# Run all checks (lint, typecheck, knip, tests)
bun run check

# Build the latest dist
bun run build

# Auto-commit dist/ if it changed after build
if ! git diff --quiet dist/; then
  echo "ğŸ“¦ dist/ changed, auto-committing..."
  git add -A dist/
  git commit -m "chore: sync dist" --no-verify
  echo "âš ï¸  dist/ committed. Run 'git push' again to include it."
  exit 1
fi
